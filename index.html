<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timeline Proyek Berkahinaja.id</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .timeline-button {
            animation: fadeIn 0.6s ease-out forwards;
            transition: all 0.3s ease;
        }
        
        .timeline-button:nth-child(1) { animation-delay: 0.1s; }
        .timeline-button:nth-child(2) { animation-delay: 0.2s; }
        .timeline-button:nth-child(3) { animation-delay: 0.3s; }
        .timeline-button:nth-child(4) { animation-delay: 0.4s; }
        .timeline-button:nth-child(5) { animation-delay: 0.5s; }
        .timeline-button:nth-child(6) { animation-delay: 0.6s; }
        
        .timeline-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .popup-overlay {
            animation: slideIn 0.3s ease-out;
        }
        
        .popup-content {
            animation: slideIn 0.3s ease-out 0.1s both;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 font-sans">
  <div class="max-w-lg mx-auto p-6 h-full"><!-- Header -->
   <div class="text-center mb-8">
    <h1 id="timeline-title" class="text-3xl font-bold text-gray-800 mb-2">Timeline Pengembangan Whitelabel</h1>
    <p id="project-name" class="text-lg text-gray-600 mb-4">Aplikasi Berkahinaja.id</p><!-- Countdown Timer -->
    <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
     <p class="text-lg text-gray-500 mb-2">Deadline Proyek:</p>
     <div class="grid grid-cols-4 gap-2 text-center">
      <div class="bg-gradient-to-br from-red-500 to-red-600 text-white rounded-lg p-2">
       <div id="days" class="text-xl font-bold">
        0
       </div>
       <div class="text-xs">
        Hari
       </div>
      </div>
      <div class="bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-lg p-2">
       <div id="hours" class="text-xl font-bold">
        0
       </div>
       <div class="text-xs">
        Jam
       </div>
      </div>
      <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-lg p-2">
       <div id="minutes" class="text-xl font-bold">
        0
       </div>
       <div class="text-xs">
        Menit
       </div>
      </div>
      <div class="bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-2">
       <div id="seconds" class="text-xl font-bold">
        0
       </div>
       <div class="text-xs">
        Detik
       </div>
      </div>
     </div>
     <p class="text-base text-gray-500 mt-2 text-center">Target: 3 Desember 2025, 23:59</p>
    </div>
   </div><!-- Timeline Buttons -->
   <div class="space-y-4"><!-- Build Basic Whitelabel --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(0)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üèóÔ∏è</span>
       <div>
        <h3 class="font-bold text-gray-800">Build Basic Whitelabel</h3>
        <p class="text-sm text-gray-500">10 November 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button> <!-- Fitur Fundraiser --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(1)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üí∞</span>
       <div>
        <h3 class="font-bold text-gray-800">Fitur Fundraiser</h3>
        <p class="text-sm text-gray-500">12 November 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button> <!-- Fitur User Profil --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(2)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üë§</span>
       <div>
        <h3 class="font-bold text-gray-800">Fitur User Profil</h3>
        <p class="text-sm text-gray-500">17 November 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button> <!-- Fitur Grup Mafaza --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(3)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üë•</span>
       <div>
        <h3 class="font-bold text-gray-800">Fitur Grup Mafaza</h3>
        <p class="text-sm text-gray-500">19 November 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button> <!-- Fitur Berita (part 1) --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(4)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üì∞</span>
       <div>
        <h3 class="font-bold text-gray-800">Fitur Berita (part 1)</h3>
        <p class="text-sm text-gray-500">24 November 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button> <!-- Fitur Berita (part 2) --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(5)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üìù</span>
       <div>
        <h3 class="font-bold text-gray-800">Fitur Berita (part 2)</h3>
        <p class="text-sm text-gray-500">26 November 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button> <!-- Fitur Kegiatan (part 1) --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(6)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üìÖ</span>
       <div>
        <h3 class="font-bold text-gray-800">Fitur Kegiatan (part 1)</h3>
        <p class="text-sm text-gray-500">1 Desember 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button> <!-- Fitur Kegiatan (part 2) --> <button class="timeline-button w-full bg-white rounded-xl p-4 shadow-md border-l-4 border-gray-300 text-left hover:shadow-lg" onclick="showPopup(7)">
     <div class="flex items-center justify-between">
      <div class="flex items-center"><span class="text-2xl mr-4">üéØ</span>
       <div>
        <h3 class="font-bold text-gray-800">Fitur Kegiatan (part 2)</h3>
        <p class="text-sm text-gray-500">3 Desember 2025</p>
       </div>
      </div>
      <div class="flex items-center"><span class="status-badge bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full mr-2">‚è≥ Menunggu</span>
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
       </svg>
      </div>
     </div></button>
   </div>
  </div><!-- Popup Overlay -->
  <div id="popup-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4" style="display: none;" onclick="closePopup()">
   <div class="popup-content bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl" onclick="event.stopPropagation()">
    <div class="flex items-center justify-between mb-4">
     <div class="flex items-center"><span id="popup-icon" class="text-3xl mr-4">üìã</span>
      <div>
       <h3 id="popup-title" class="text-xl font-bold text-gray-800">Fase Timeline</h3>
       <p id="popup-date" class="text-sm text-gray-500">Tanggal</p>
      </div>
     </div><button onclick="closePopup()" class="text-gray-400 hover:text-gray-600 transition-colors">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="mb-4"><span id="popup-status" class="inline-block bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full mb-4">Status</span>
     <p id="popup-description" class="text-gray-600 leading-relaxed">Deskripsi detail dari fase ini akan muncul di sini.</p>
    </div>
    <div class="border-t pt-4">
     <h4 class="font-semibold text-gray-800 mb-2">Deliverables:</h4>
     <ul id="popup-deliverables" class="text-sm text-gray-600 space-y-1">
      <li>‚Ä¢ Item deliverable 1</li>
      <li>‚Ä¢ Item deliverable 2</li>
     </ul>
    </div>
   </div>
  </div>
  <script>
        // Phase data
        const phases = [
            {
                title: "Build Basic Whitelabel",
                date: "2025-11-10",
                icon: "üèóÔ∏è",
                description: "Membangun struktur aplikasi dasar seperti bigamal.com dengan penyesuaian logo, domain dan google auth",
                deliverables: [
                    "berkahinaja.id dapat diakses",
                    "tema aplikasi dan logo sesuai",
                    "fitur basic big amal dapat dijalankan"
                ]
            },
            {
                title: "Fitur Fundraiser",
                date: "2025-11-12", 
                icon: "üí∞",
                description: "Implementasi sistem fundraising yang memungkinkan pengguna untuk membuat progam yang dapat di tracking sesuai ID Fundraiser. Fitur ini menjadi salah satu core feature dari aplikasi Berkahinaja.id.",
                deliverables: [
                    "Program creation dan management",
                    "Fitur Fundraiser dapat dijalankan",
                    "Donation tracking system"
                ]
            },
            {
                title: "Fitur User Profil",
                date: "2025-11-17",
                icon: "üë§", 
                description: "Pengembangan sistem profil pengguna yang komprehensif dengan fitur edit profil, upload foto, riwayat aktivitas, dan pengaturan akun. Fitur ini juga memungkinkan pengguna mengubah sendiri status dalam lingkungan berkahinaja.",
                deliverables: [
                    "Set status sebagai siswa atau orang tua",
                    "Upload photo dan fitur edit lainnya",
                    "Activity history tracking"
                ]
            },
            {
                title: "Fitur Grup Mafaza", 
                date: "2025-11-19",
                icon: "üë•",
                description: "Implementasi sistem grup Mafaza yang memungkinkan pengguna bergabung dalam Grup tertentu, Mendapat berita dan Info khusu, dan berinteraksi dengan sesama anggota. Fitur ini mendukung aspek sosial dari aplikasi.",
                deliverables: [
                    "Group creation dan management",
                    "Member assign system",
                    "Content sharing dalam grup"
                ]
            },
            {
                title: "Fitur Berita (part 1)",
                date: "2025-11-24",
                icon: "üì∞",
                description: "Pengembangan sistem berita tahap pertama yang mencakup tampilan feed berita, kategorisasi, dan sistem pencarian. Bagian ini fokus pada konsumsi konten berita oleh pengguna.",
                deliverables: [
                    "News feed dan listing",
                    "Category filtering system",
                    "Search functionality",
                    "News detail view"
                ]
            },
            {
                title: "Fitur Berita (part 2)",
                date: "2025-11-26", 
                icon: "üìù",
                description: "Melanjutkan pengembangan fitur berita dengan fokus pada interaksi pengguna seperti komentar, like, juga memungkinkan untuk berdonasi.",
                deliverables: [
                    "Comment system",
                    "Like functionality",
                    "Optional Donation Setting"
                ]
            },
            {
                title: "Fitur Kegiatan (part 1)",
                date: "2025-12-01", 
                icon: "üìÖ",
                description: "Implementasi sistem kegiatan tahap pertama yang memungkinkan pengguna melihat daftar event, detail kegiatan, dan sistem pendaftaran. Fitur ini penting untuk engagement komunitas.",
                deliverables: [
                    "Event listing dan calendar view",
                    "Event detail information",
                    "Registration system",
                    "Event search dan filter"
                ]
            },
            {
                title: "Fitur Kegiatan (part 2)",
                date: "2025-12-03", 
                icon: "üéØ",
                description: "Penyelesaian fitur kegiatan dengan implementasi check-in system via QR Code, dan integrasi dengan fitur grup. Tahap final ini memastikan aplikasi siap untuk launch dengan semua fitur terintegrasi.",
                deliverables: [
                    "Event check-in system",
                    "Integration dengan grup Mafaza",
                    "Final testing dan optimization"
                ]
            }
        ];

        // Default configuration
        const defaultConfig = {
            timeline_title: "Timeline Pengembangan Aplikasi",
            project_name: "Aplikasi Whitelabel Berkahinaja.id",
            background_color: "#f0f7ff",
            primary_color: "#3b82f6", 
            secondary_color: "#ffffff",
            text_color: "#1f2937",
            accent_color: "#10b981"
        };

        // Function to calculate phase status based on current date
        function getPhaseStatus(phaseIndex) {
            const today = new Date();
            today.setHours(0, 0, 0, 0); // Reset time to start of day
            
            const phaseDate = new Date(phases[phaseIndex].date);
            phaseDate.setHours(0, 0, 0, 0);
            
            // Find current active phase (first phase that hasn't passed)
            let currentPhaseIndex = -1;
            for (let i = 0; i < phases.length; i++) {
                const checkDate = new Date(phases[i].date);
                checkDate.setHours(0, 0, 0, 0);
                if (checkDate >= today) {
                    currentPhaseIndex = i;
                    break;
                }
            }
            
            // If all phases have passed, mark all as completed
            if (currentPhaseIndex === -1) {
                return {
                    status: "‚úì Selesai",
                    statusClass: "bg-green-100 text-green-800",
                    borderClass: "border-green-500"
                };
            }
            
            // Phase has passed - completed
            if (phaseIndex < currentPhaseIndex) {
                return {
                    status: "‚úì Selesai",
                    statusClass: "bg-green-100 text-green-800",
                    borderClass: "border-green-500"
                };
            }
            // Current phase - in progress
            else if (phaseIndex === currentPhaseIndex) {
                return {
                    status: "üîÑ Sedang Berjalan",
                    statusClass: "bg-blue-100 text-blue-800",
                    borderClass: "border-blue-500"
                };
            }
            // Future phases - waiting
            else {
                return {
                    status: "‚è≥ Menunggu",
                    statusClass: "bg-gray-100 text-gray-600",
                    borderClass: "border-gray-300"
                };
            }
        }

        // Function to update all phase statuses
        function updatePhaseStatuses() {
            const buttons = document.querySelectorAll('.timeline-button');
            buttons.forEach((button, index) => {
                const statusInfo = getPhaseStatus(index);
                const statusElement = button.querySelector('.status-badge');
                const borderElement = button;
                
                if (statusElement) {
                    statusElement.textContent = statusInfo.status;
                    statusElement.className = `status-badge ${statusInfo.statusClass} text-xs px-2 py-1 rounded-full mr-2`;
                }
                
                // Update border color
                borderElement.className = borderElement.className.replace(/border-l-4 border-\w+-\d+/, `border-l-4 ${statusInfo.borderClass}`);
            });
        }

        // Show popup
        function showPopup(phaseIndex) {
            const phase = phases[phaseIndex];
            const statusInfo = getPhaseStatus(phaseIndex);
            
            // Format date for display
            const displayDate = new Date(phase.date).toLocaleDateString('id-ID', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
            
            // Update popup content
            document.getElementById('popup-icon').textContent = phase.icon;
            document.getElementById('popup-title').textContent = phase.title;
            document.getElementById('popup-date').textContent = displayDate;
            document.getElementById('popup-status').textContent = statusInfo.status;
            document.getElementById('popup-status').className = `inline-block ${statusInfo.statusClass} text-sm px-3 py-1 rounded-full mb-4`;
            document.getElementById('popup-description').textContent = phase.description;
            
            // Update deliverables
            const deliverablesList = document.getElementById('popup-deliverables');
            deliverablesList.innerHTML = phase.deliverables.map(item => `<li>‚Ä¢ ${item}</li>`).join('');
            
            // Show popup
            document.getElementById('popup-overlay').style.display = 'flex';
        }

        // Close popup
        function closePopup() {
            document.getElementById('popup-overlay').style.display = 'none';
        }

        // Configuration change handler
        async function onConfigChange(config) {
            const timelineTitle = config.timeline_title || defaultConfig.timeline_title;
            const projectName = config.project_name || defaultConfig.project_name;
            const backgroundColor = config.background_color || defaultConfig.background_color;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const fontFamily = config.font_family || 'Inter, system-ui, sans-serif';
            const fontSize = config.font_size || 16;

            // Update text content
            document.getElementById('timeline-title').textContent = timelineTitle;
            document.getElementById('project-name').textContent = projectName;

            // Update colors
            document.body.style.background = `linear-gradient(to bottom right, ${backgroundColor}, ${primaryColor}20)`;
            document.body.style.fontFamily = `${fontFamily}, system-ui, sans-serif`;

            // Update font sizes
            document.getElementById('timeline-title').style.fontSize = `${fontSize * 1.875}px`;
            document.getElementById('timeline-title').style.color = textColor;
            document.getElementById('project-name').style.fontSize = `${fontSize * 1.125}px`;

            // Update button colors
            const buttons = document.querySelectorAll('.timeline-button');
            buttons.forEach(button => {
                button.style.backgroundColor = secondaryColor;
            });

            // Update popup colors
            const popup = document.querySelector('.popup-content');
            if (popup) {
                popup.style.backgroundColor = secondaryColor;
            }
        }

        // Capabilities mapping
        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.background_color || defaultConfig.background_color,
                        set: (value) => {
                            config.background_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.primary_color || defaultConfig.primary_color,
                        set: (value) => {
                            config.primary_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.secondary_color || defaultConfig.secondary_color,
                        set: (value) => {
                            config.secondary_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ secondary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            config.text_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.accent_color || defaultConfig.accent_color,
                        set: (value) => {
                            config.accent_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ accent_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || 'Inter, system-ui, sans-serif',
                    set: (value) => {
                        config.font_family = value;
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || 16,
                    set: (value) => {
                        config.font_size = value;
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }
            };
        }

        // Edit panel values mapping
        function mapToEditPanelValues(config) {
            return new Map([
                ["timeline_title", config.timeline_title || defaultConfig.timeline_title],
                ["project_name", config.project_name || defaultConfig.project_name]
            ]);
        }

        // Countdown Timer Function
        function updateCountdown() {
            const targetDate = new Date('2025-12-03T23:59:59').getTime();
            const now = new Date().getTime();
            const timeLeft = targetDate - now;

            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days;
                document.getElementById('hours').textContent = hours;
                document.getElementById('minutes').textContent = minutes;
                document.getElementById('seconds').textContent = seconds;
            } else {
                document.getElementById('days').textContent = '0';
                document.getElementById('hours').textContent = '0';
                document.getElementById('minutes').textContent = '0';
                document.getElementById('seconds').textContent = '0';
            }
        }

        // Initialize SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }

        // Initialize phase statuses
        updatePhaseStatuses();

        // Start countdown timer
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Update phase statuses every hour to check for date changes
        setInterval(updatePhaseStatuses, 3600000);

        // Close popup with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closePopup();
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99dc651fb75e61bc',t:'MTc2MzAxNzI1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
